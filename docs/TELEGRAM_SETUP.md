# ü§ñ Telegram Bot Setup Guide

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Telegram Bot –∏ Mini App –¥–ª—è Salmina Shop.

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

- ‚úÖ Telegram Bot notification service —Å–æ–∑–¥–∞–Ω
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å orders module (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–∞—Ö)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å auth module (–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### 1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π (–í–ê–ñ–ù–û!)

**–ö–æ–¥ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** —á–µ—Ä–µ–∑ GitHub Actions –ø—Ä–∏ –∫–∞–∂–¥–æ–º push –≤ main!

üìñ –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ **[GITHUB_ACTIONS_SETUP.md](GITHUB_ACTIONS_SETUP.md)** –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è.

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è, –ø—Ä–æ—Å—Ç–æ –¥–µ–ª–∞–π—Ç–µ `git push origin main` –∏ –∫–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

<details>
<summary>–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –≤—Ä—É—á–Ω—É—é (–∫–ª–∏–∫–Ω–∏—Ç–µ —á—Ç–æ–±—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å)</summary>

```bash
ssh root@91.229.11.132
cd /var/www/telegram-shop
git pull origin main
cd apps/backend
pnpm install && pnpm build
pm2 restart telegram-shop-backend
```
</details>

### 2. –ü–æ–ª—É—á–∏—Ç–µ Chat ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–∞—Ö, –Ω—É–∂–µ–Ω –≤–∞—à Telegram Chat ID:

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–∑–∞–º–µ–Ω–∏—Ç–µ YOUR_BOT_TOKEN –Ω–∞ —Ç–æ–∫–µ–Ω –æ—Ç BotFather):
https://api.telegram.org/botYOUR_BOT_TOKEN/getUpdates

# –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É –≤ Telegram: /start
# –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –±—Ä–∞—É–∑–µ—Ä–∞
# –ù–∞–π–¥–∏—Ç–µ "chat":{"id":12345678} - —ç—Ç–æ –≤–∞—à Chat ID
```

### 3. –û–±–Ω–æ–≤–∏—Ç–µ .env —Ñ–∞–π–ª

```bash
nano /var/www/telegram-shop/apps/backend/.env
```

–î–æ–±–∞–≤—å—Ç–µ/–æ–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
# Telegram Bot
TELEGRAM_BOT_TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_botfather"
TELEGRAM_ADMIN_CHAT_ID="–≤–∞—à_chat_id"  # –î–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∑–∞–∫–∞–∑–∞—Ö

# Admin Telegram IDs (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é, –¥–ª—è —Ä–æ–ª–∏ ADMIN)
ADMIN_TELEGRAM_IDS="–≤–∞—à_telegram_user_id,123456789"
```

**–ö–∞–∫ —É–∑–Ω–∞—Ç—å —Å–≤–æ–π Telegram User ID:**
- –û—Ç–∫—Ä–æ–π—Ç–µ @userinfobot –≤ Telegram
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–º—É –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- –û–Ω –ø—Ä–∏—à–ª—ë—Ç –≤–∞—à ID

### 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend

```bash
pm2 restart telegram-shop-backend
pm2 save
pm2 logs telegram-shop-backend --lines 20
```

## üì± –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Mini App –≤ BotFather

### 1. –°–æ–∑–¥–∞–π—Ç–µ Mini App

–û—Ç–ø—Ä–∞–≤—å—Ç–µ @BotFather –∫–æ–º–∞–Ω–¥—ã:

```
/newapp
```

–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:

- **Title**: Salmina Shop
- **Short name**: salmina (—Ç–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω–∏—Ü–∞, –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤)
- **Description**: –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω –∫–æ—Å–º–µ—Ç–∏–∫–∏
- **Photo**: –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ª–æ–≥–æ—Ç–∏–ø (512x512 px)
- **Web App URL**: `https://salminashop.ru`

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é

```
/setmenubutton
```

–í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ:
- **Text**: üõç –û—Ç–∫—Ä—ã—Ç—å –º–∞–≥–∞–∑–∏–Ω
- **URL**: `https://salminashop.ru`

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –∫–æ–º–∞–Ω–¥—ã

```
/setdescription
```

–ü—Ä–∏–º–µ—Ä:
```
üõç Salmina Shop - –≤–∞—à –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –∫–æ—Å–º–µ—Ç–∏–∫–∏

‚ú® –®–∏—Ä–æ–∫–∏–π –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç —Ç–æ–≤–∞—Ä–æ–≤
üöö –ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞
üí≥ –£–¥–æ–±–Ω–∞—è –æ–ø–ª–∞—Ç–∞
üì± –ü–æ–∫—É–ø–∫–∏ –ø—Ä—è–º–æ –≤ Telegram
```

```
/setcommands
```

–î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—ã:
```
start - –û—Ç–∫—Ä—ã—Ç—å –º–∞–≥–∞–∑–∏–Ω
catalog - –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤
cart - –ú–æ—è –∫–æ—Ä–∑–∏–Ω–∞
orders - –ú–æ–∏ –∑–∞–∫–∞–∑—ã
help - –ü–æ–º–æ—â—å
```

### 4. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–æ—Ç–∞

```
/setuserpic
```

–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è –±–æ—Ç–∞ (640x640 px).

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
curl -X POST "https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/getMe"
```

### 2. –¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑ —á–µ—Ä–µ–∑ frontend –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. ‚úÖ –ê–¥–º–∏–Ω –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –¥–µ—Ç–∞–ª—è–º–∏ –∑–∞–∫–∞–∑–∞
2. ‚úÖ –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (–µ—Å–ª–∏ —ç—Ç–æ –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
3. ‚úÖ –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

### 3. –ó–∞–ø—É—Å–∫ Mini App

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é "üõç –û—Ç–∫—Ä—ã—Ç—å –º–∞–≥–∞–∑–∏–Ω"
3. –î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è https://salminashop.ru

## üìã –ß—Ç–æ –¥–µ–ª–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –ù–æ–≤—ã–π –∑–∞–∫–∞–∑ (–∞–¥–º–∏–Ω—É)

```
üõç –ù–æ–≤—ã–π –∑–∞–∫–∞–∑ #ORD-12345678-9012

üë§ –ö–ª–∏–µ–Ω—Ç: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤
üí∞ –°—É–º–º–∞: 2500‚ÇΩ

üì¶ –¢–æ–≤–∞—Ä—ã:
  ‚Ä¢ –ö—Ä–µ–º –¥–ª—è –ª–∏—Ü–∞ x1 - 1500‚ÇΩ
  ‚Ä¢ –®–∞–º–ø—É–Ω—å x2 - 1000‚ÇΩ

üîó –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –∞–¥–º–∏–Ω–∫–µ: https://admin.salminashop.ru/orders/ORD-12345678-9012
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ (–∫–ª–∏–µ–Ω—Ç—É)

```
üì¶ –ó–∞–∫–∞–∑ #ORD-12345678-9012

–°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω—ë–Ω: üöö –û—Ç–ø—Ä–∞–≤–ª–µ–Ω

üìÆ –¢—Ä–µ–∫-–Ω–æ–º–µ—Ä: 123456789012

üîó –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏: https://salminashop.ru/orders
```

### –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ (–Ω–æ–≤–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é)

```
üëã –ü—Ä–∏–≤–µ—Ç, –ò–≤–∞–Ω!

–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Salmina Shop - –≤–∞—à –º–∞–≥–∞–∑–∏–Ω –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –∫–æ—Å–º–µ—Ç–∏–∫–∏!

üõç –ß—Ç–æ –≤–∞—Å –∂–¥—ë—Ç:
‚Ä¢ –®–∏—Ä–æ–∫–∏–π –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç —Ç–æ–≤–∞—Ä–æ–≤
‚Ä¢ –ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞
‚Ä¢ –£–¥–æ–±–Ω–∞—è –æ–ø–ª–∞—Ç–∞
‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7

üì± –ù–∞—á–Ω–∏—Ç–µ –ø–æ–∫—É–ø–∫–∏ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!
```

## üîç Troubleshooting

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `TELEGRAM_BOT_TOKEN` –≤ `.env`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `TELEGRAM_ADMIN_CHAT_ID` –≤ `.env`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `pm2 logs telegram-shop-backend | grep -i telegram`

### Mini App –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ URL –≤ BotFather: `https://salminashop.ru` (—Å https)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤–∞–ª–∏–¥–µ–Ω
3. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à Telegram (Settings ‚Üí Advanced ‚Üí Clear Cache)

### –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç

1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–≤—ã–π —Ä–∞–∑ –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±–æ—Ç –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω —Å–Ω–∞—á–∞–ª–∞ –Ω–∞–ø–∏—Å–∞—Ç—å –±–æ—Ç—É `/start`

## üöÄ Next Steps

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram Bot:

1. [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
2. [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞
3. [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. [ ] –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞–º–∏
5. [ ] Phase 6.2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–ª–∞—Ç—ë–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã Prodamus

---

**Status:** ‚úÖ Telegram Bot service ready for deployment
